<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Perlin noise</title>
  <style>
    * {
      padding: 0;
      margin: 0;
    }
  </style>
</head>

<body style="overflow-x: hidden;display: flex;flex-direction: row;height:200vh;">
  <canvas style="height: 100vh; width: 100vw;position: fixed;top:0"></canvas>
</body>
<script type="module">
  import { drawPerlin } from "./perlin.js"
  import { getPerlinGrid } from "./get-perlin-grid.js"
  import { getRandomArray } from "./utils.js"

  let permutationTable = getRandomArray(255);
  const canvas = document.querySelectorAll("canvas")[0];
  let perlinGrid = getPerlinGrid(canvas.clientWidth, canvas.clientHeight, permutationTable);
  drawPerlin(canvas, perlinGrid[0])
  addEventListener("scroll", (event) => {
    const scrollTop = document.documentElement.scrollTop;
    drawPerlin(canvas, perlinGrid[Math.floor(scrollTop % canvas.clientHeight)])
  });
</script>

</html>